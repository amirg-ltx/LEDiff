Metadata-Version: 2.4
Name: diffusers
Version: 0.30.0.dev0
Summary: State-of-the-art diffusion in PyTorch and JAX.
Home-page: https://github.com/huggingface/diffusers
Author: The Hugging Face team (past and future) with the help of all our contributors (https://github.com/huggingface/diffusers/graphs/contributors)
Author-email: diffusers@huggingface.co
License: Apache 2.0 License
Keywords: deep learning diffusion jax pytorch stable diffusion audioldm
Classifier: Development Status :: 5 - Production/Stable
Classifier: Intended Audience :: Developers
Classifier: Intended Audience :: Education
Classifier: Intended Audience :: Science/Research
Classifier: License :: OSI Approved :: Apache Software License
Classifier: Operating System :: OS Independent
Classifier: Topic :: Scientific/Engineering :: Artificial Intelligence
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Requires-Python: >=3.8.0
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: importlib_metadata
Requires-Dist: filelock
Requires-Dist: huggingface-hub>=0.23.2
Requires-Dist: numpy
Requires-Dist: regex!=2019.12.17
Requires-Dist: requests
Requires-Dist: safetensors>=0.3.1
Requires-Dist: Pillow
Provides-Extra: quality
Requires-Dist: urllib3<=2.0.0; extra == "quality"
Requires-Dist: isort>=5.5.4; extra == "quality"
Requires-Dist: ruff==0.1.5; extra == "quality"
Requires-Dist: hf-doc-builder>=0.3.0; extra == "quality"
Provides-Extra: docs
Requires-Dist: hf-doc-builder>=0.3.0; extra == "docs"
Provides-Extra: training
Requires-Dist: accelerate>=0.31.0; extra == "training"
Requires-Dist: datasets; extra == "training"
Requires-Dist: protobuf<4,>=3.20.3; extra == "training"
Requires-Dist: tensorboard; extra == "training"
Requires-Dist: Jinja2; extra == "training"
Requires-Dist: peft>=0.6.0; extra == "training"
Provides-Extra: test
Requires-Dist: compel==0.1.8; extra == "test"
Requires-Dist: GitPython<3.1.19; extra == "test"
Requires-Dist: datasets; extra == "test"
Requires-Dist: Jinja2; extra == "test"
Requires-Dist: invisible-watermark>=0.2.0; extra == "test"
Requires-Dist: k-diffusion>=0.0.12; extra == "test"
Requires-Dist: librosa; extra == "test"
Requires-Dist: parameterized; extra == "test"
Requires-Dist: pytest; extra == "test"
Requires-Dist: pytest-timeout; extra == "test"
Requires-Dist: pytest-xdist; extra == "test"
Requires-Dist: requests-mock==1.10.0; extra == "test"
Requires-Dist: safetensors>=0.3.1; extra == "test"
Requires-Dist: sentencepiece!=0.1.92,>=0.1.91; extra == "test"
Requires-Dist: scipy; extra == "test"
Requires-Dist: torchvision; extra == "test"
Requires-Dist: transformers>=4.41.2; extra == "test"
Provides-Extra: torch
Requires-Dist: torch>=1.4; extra == "torch"
Requires-Dist: accelerate>=0.31.0; extra == "torch"
Provides-Extra: flax
Requires-Dist: jax>=0.4.1; extra == "flax"
Requires-Dist: jaxlib>=0.4.1; extra == "flax"
Requires-Dist: flax>=0.4.1; extra == "flax"
Provides-Extra: dev
Requires-Dist: urllib3<=2.0.0; extra == "dev"
Requires-Dist: isort>=5.5.4; extra == "dev"
Requires-Dist: ruff==0.1.5; extra == "dev"
Requires-Dist: hf-doc-builder>=0.3.0; extra == "dev"
Requires-Dist: compel==0.1.8; extra == "dev"
Requires-Dist: GitPython<3.1.19; extra == "dev"
Requires-Dist: datasets; extra == "dev"
Requires-Dist: Jinja2; extra == "dev"
Requires-Dist: invisible-watermark>=0.2.0; extra == "dev"
Requires-Dist: k-diffusion>=0.0.12; extra == "dev"
Requires-Dist: librosa; extra == "dev"
Requires-Dist: parameterized; extra == "dev"
Requires-Dist: pytest; extra == "dev"
Requires-Dist: pytest-timeout; extra == "dev"
Requires-Dist: pytest-xdist; extra == "dev"
Requires-Dist: requests-mock==1.10.0; extra == "dev"
Requires-Dist: safetensors>=0.3.1; extra == "dev"
Requires-Dist: sentencepiece!=0.1.92,>=0.1.91; extra == "dev"
Requires-Dist: scipy; extra == "dev"
Requires-Dist: torchvision; extra == "dev"
Requires-Dist: transformers>=4.41.2; extra == "dev"
Requires-Dist: accelerate>=0.31.0; extra == "dev"
Requires-Dist: datasets; extra == "dev"
Requires-Dist: protobuf<4,>=3.20.3; extra == "dev"
Requires-Dist: tensorboard; extra == "dev"
Requires-Dist: Jinja2; extra == "dev"
Requires-Dist: peft>=0.6.0; extra == "dev"
Requires-Dist: hf-doc-builder>=0.3.0; extra == "dev"
Requires-Dist: torch>=1.4; extra == "dev"
Requires-Dist: accelerate>=0.31.0; extra == "dev"
Requires-Dist: jax>=0.4.1; extra == "dev"
Requires-Dist: jaxlib>=0.4.1; extra == "dev"
Requires-Dist: flax>=0.4.1; extra == "dev"
Dynamic: author
Dynamic: author-email
Dynamic: classifier
Dynamic: description
Dynamic: description-content-type
Dynamic: home-page
Dynamic: keywords
Dynamic: license
Dynamic: license-file
Dynamic: provides-extra
Dynamic: requires-dist
Dynamic: requires-python
Dynamic: summary

# LEDiff: Latent Exposure Diffusion for HDR Generation (CVPR2025)

<p align="center">
  <a href="https://lediff.mpi-inf.mpg.de/">
    <img src="https://img.shields.io/badge/Project-Page-blue" alt="Project Page">
  </a>
  <a href="https://lediff.mpi-inf.mpg.de/resource/LEDiff_Latent_Exposure_Diffusion_for_HDR_Generation_Supp.pdf">
    <img src="https://img.shields.io/badge/Paper-PDF-red" alt="Paper">
  </a>
</p>

---

## üìñ <span style="background-color:#f0f0f0; padding:4px 8px; border-radius:6px;">Introduction</span>
LEDiff is a latent diffusion framework for high dynamic range (HDR) image generation.  
The method builds on the [Hugging Face diffusers](https://huggingface.co/docs/diffusers/index) library and adapts exposure-aware latent fusion for robust HDR synthesis.  
It achieves high fidelity in both shadow and highlight regions while remaining efficient for fine-tuning with limited HDR data.

---

## üöÄ <span style="background-color:#f0f0f0; padding:4px 8px; border-radius:6px;">Quick Start</span>

### Installation

```bash
# 1. Install LEDiff package
pip install -e .

# 2. Install example requirements
cd examples/text_to_image
pip install -r requirements.txt
```

**Requirements:** Python 3.8+, CUDA-capable GPU (recommended), and dependencies listed in `examples/text_to_image/requirements.txt` (includes opencv-python, scipy, numpy, torch, ffmpeg-python, etc.)

### Download Pretrained Models

Download the pretrained models from:
- **Highlight Hallucination Model**: [Google Drive](https://drive.google.com/file/d/1gd9KNmOQ3RH4yvX_Fp4hu2Jko64nbt2j/view?usp=sharing)
- **Shadow Hallucination Model**: [Google Drive](https://drive.google.com/file/d/1tMk0rovHSt93wSeIiQ6fxsxPTCiZ6Dmw/view?usp=sharing)

Unzip and note the model folder path.

### Run Inference

**Important:** All paths must be **absolute paths** (starting with `/`), not relative paths.

```bash
cd examples/text_to_image

# Inverse Tone Mapping (ITM)
python test_hdr_itm.py \
  --model_path /home/user/models/lediff_highlight_model/ \
  --image_folder /home/user/LEDiff/dataset/Inverse_Tone_Mapping/ \
  --output_hdr_path /home/user/outputs/ \
  --seed 42

# HDR Generation
python test_hdr_generation.py \
  --model_path /home/user/models/lediff_highlight_model/ \
  --image_folder /home/user/LEDiff/dataset/HDR_generation/ \
  --output_hdr_path /home/user/outputs/
```

**Input formats:**
- ITM: LDR images (`.jpg`, `.png`) in `--image_folder`
- HDR Generation: Latent code `.npy` files in `--image_folder`

**Path requirements:**
- Use full absolute paths (e.g., `/home/user/path/to/folder/`) for all arguments
- Do not use relative paths (e.g., `../folder/` or `./folder/`)
- Ensure paths end with `/` for directories

---

## ‚öôÔ∏è <span style="background-color:#f0f0f0; padding:4px 8px; border-radius:6px;">Usage for HDR Generation and Reconstruction</span>
For detailed examples and documentation, see: `examples/text_to_image/`

Scripts available:
- **HDR Generation** (`test_hdr_generation.py`)
- **Inverse Tone Mapping** (`test_hdr_itm.py`)


